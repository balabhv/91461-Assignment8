<!DOCTYPE html>
<!--
  Name: Virinchi Balabhadrapatruni                                             
  Email: Virinchi_Balabhadrapatruni@student.uml.edu                            
  UMass Lowell Computer Science, 91.461 GUI Programming I                      
  Date: 11/14/2014                                                               
  Description: HTML File created for Assignment #8.   
-->
<html>
    <head>
        <title>GUI Programming I Assignment #8</title>
        <meta charset="UTF-8">

        <!-- Google Web Fonts link -->
        <link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>

        <!-- Javascript Files -->
        <!-- jQuery and jQueryUI js and CSS files -->

        <script src="//code.jquery.com/jquery-1.10.2.js"></script>
        <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
        <!-- jQuery Validation Plugin -->
        <script src="js/libs/validation/jquery.validate.min.js"></script>

        <!-- This file loads the multiplication table using the user-entered data. -->
        <script type="text/javascript" src="js/dynamictable.js"></script>

        <!-- CSS Files -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
        <!-- CSS Reset. Source can be found in the header of the CSS file itself. -->
        <link href="css/reset.css" rel="stylesheet">

        <!-- My CSS file for this assignment. -->
        <link rel="stylesheet" type="text/css" href="css/assignment8.css">


        <!-- JavaScript/jQuery function that prevents users from entering alphabets and most special characters.
        The allowed characters include the digits from 0-9, a decimal point, and a dash (minus sign for negative numbers).
        Other, nonprinting characters are the arrow and backspace keys. This function uses ASCII character codes.-->
        <script type="text/javascript">
            $(document).ready(function () {

                //this is to prevent unwanted characters like alphabert & specials
                $('.numeric').keypress(function (e) {

                    if (e.which !== 8 && e.which !== 0 && e.which !== 45 && (e.which < 48 || e.which > 57)) {
                        return false;
                    }
                });
                // prevents cut, copy, and paste into the input fields
                $('.numeric').bind("cut copy paste", function (e) {
                    e.preventDefault();
                });




            });
        </script>
    </head>
    <body>

        <!-- Main div for tabs -->
        <div id="tabs">
            <!-- Header list for tab links. -->
            <ul>
                <li><a href="#tabs-1">Input</a></li>
                <li><a href="#tabs-2">Layout Editor</a></li>
            </ul>
            <!-- Separate divs for tab content -->
            <div id="tabs-1">
                <!-- div for input -->
                <div id="inputform">

                    <form id="inputformtag">
                        <h1>Input Integers for Multiplication Table in the Form Below:</h1>
                        <!-- The four text inputs. -->
                        <h4 class="fieldlbl">Enter column start : </h4><input type="text" name="colStart" id="firstInput" class="numeric" size="40"><br>
                        <h4 class="fieldlbl" id="lbl1">Enter column end : </h4><input type="text" name="colEnd" id="secondInput" class="numeric" size="40"><br>
                        <h4 class="fieldlbl2">Enter row start : </h4><input type="text" id="thirdInput" name="rowStart" class="numeric" size="40"><br>
                        <h4 class="fieldlbl2" id="lbl2">Enter row end : </h4><input type="text" name="rowEnd" id="fourthInput" class="numeric" size="40"><br>

                        <!-- I used input type button rather than input type submit because I wanted to have more fine control over the button's click event.
                        As such, I realized that submit would append the inputs to the url. I didn't really want that. Rather, I wanted
                        to call a function onClick with the form as a parameter, which isn't possible when capturing the submit event via jQuery. -->
                        <input type="submit" value="Submit">
                    </form>

                </div>
            </div>
            <!-- div for layout editor -->
            <div id="tabs-2">
                <div id='frm'></div>
                <button id="reloader">Reload</button>
            </div>
        </div>
        <!-- this function reloads the layout editor to generate checkboxes for the number of tables -->
        <script>
            $('#reloader').click(function () {
                console.log('button clicked');
                // if the layout editor is the active tab
                var active = $("#tabs").tabs("option", "active");
                if (active === 1) {
                    console.log('creating layout editor');
                    // get the list of tabs
                    var arrTemp = $('#tabs >ul >li');
                    var arr = [];
                    arrTemp.each(function () {
                        arr.push($(this));
                    });
                    var size = arr.length;
                    // get the layout editor and remove all checkboxes
                    var editor = document.getElementById('frm');
                    while (editor.firstChild) {
                        editor.removeChild(editor.firstChild);
                    }
                    // if there are tables, create the layout editor
                    if (size > 2) {
                        var title = document.createElement('h1');
                        title.innerHTML = "Layout Editor";
                        editor.appendChild(title);
                        var editform = document.createElement('div');
                        editform.id = 'edit';
                        var i = 0;
                        for (i = 2; i < size; i++) {
                            var el = arr[i];
                            var pair = el.children().html();
                            console.log('Pair = ' + pair + ' i = ' + i + " size = " + size);
                            // create the necessary elements
                            var checkbox = document.createElement('input');
                            checkbox.type = "checkbox";
                            checkbox.name = "tabCheck";
                            checkbox.value = "value";
                            var id = el.attr("aria-controls").substring(el.attr("aria-controls").indexOf('-') + 1);
                            checkbox.id = "check-" + id;

                            var label = document.createElement('label');
                            label.htmlFor = checkbox.id;
                            label.appendChild(document.createTextNode(pair));

                            editform.appendChild(checkbox);
                            editform.appendChild(label);
                            editform.appendChild(document.createElement('br'));
                        }
                        if (i > 2) {
                            editform.appendChild(document.createElement('br'));
                            var submit = document.createElement("button");
                            submit.innerHTML = "Delete";
                            submit.id = "delete";
                            editform.appendChild(submit);
                        }

                        editor.appendChild(editform);
                    }

                }
            });
        </script>
        
        <!-- this script deletes the tabs corresponding to the selected checkboxes of the layout editor -->
        <script>
            $(document).on("click", "#delete", function () {
                console.log('delete clicked');
                // for each checkbox
                $.each($("input[type='checkbox']"), function () {
                    console.log('For each tab');
                    // if the checkbox is checked
                    if (this.checked) {
                        //delete
                        console.log('Delete tab');
                        var id = parseInt(this.id.substring(this.id.indexOf('-') + 1));
                        var panelId = 'tabs-' + id;
                        $("#" + panelId).remove();
                        $("#tabs").tabs().find(".ui-tabs-nav").find("[aria-controls='" + panelId + "']").remove();

                    }
                    $("#tabs").tabs("refresh");
                });


                console.log('found all tabs');
                $("#reloader").click();
            });
        </script>


        <!-- A footer div that contains the View Source, View CSS, and View Javascript links. -->
        <div id="footer">
            <footer>
                <div id="left">
                    <!-- Note: This link DOESN'T work in IE. -->
                    <a href="#" onClick='window.location = "view-source:" + window.location.href'>View HTML</a>
                </div>
                <div id="center">
                    <a href="css/assignment8.css">View CSS</a>
                </div>
                <div id="right">
                    <a href="js/dynamictable.js">View JavaScript</a>
                </div>
            </footer>
        </div>
    </body>
</html>
